<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <title>Create School || EDUBD</title>
    <meta charset="utf-8">
</head>
<body>
    <h1>EDUBD - Manage School Portal</h1>

    <h3>Create New School</h3> <br>

    <form action="#" th:action="@{/School/Create}" th:object="${school}" th:method="POST">
        <label>School Name:<br>
        <input type="text" th:field="*{schoolName}" id="schoolName" required>
        </label> <br>
        <label>School Email:<br>
        <input type="text" th:field="*{schoolEmail}" id="schoolEmail" required>
        </label> <br>
        <label>Phone Number: <br>
        <input type="tel" th:field="*{schoolPhone}" id="schoolPhone" required>
        </label> <br>
        <input id='btn' type="submit" value="Submit" > <input type="reset" value="Reset"/>
    </form>

    <div id="msg">
        <pre></pre>
    </div>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>


    <script>
        let schools=[];
        const addSchool = (ev) =>{ //ev=event
            ev.preventDefault();
            let school={ //create a json object
                schoolName: document.getElementById('schoolName').value,
                schoolEmail: document.getElementById('schoolEmail').value,
                schoolPhone: document.getElementById('schoolPhone').value,
                status: null,
                schoolStreet:null,
                SchoolHouse:null,
                schoolZip:null,
                schoolCity:null,
                schoolState:null,
                schoolCountry:null,
                image:null,
                createBy:null,
                updatedBy:null,
                createdDate:null,
                updatedDate:null,
                id:null
            }
            schools.push(school);
            document.forms[0].reset(); // clear the form.

            $.ajax({
                url:'/School/Create',
                data: JSON.stringify(school),
                type: "POST",
                contentType:"application/json; charset=utf-8",
                async:false,
                cache:false,
                processData:false,
                success:function(){
                    alert("Success");
                }
            });
           // JSON.stringify(schools);
            //display only
           // console.warn('added',{schools});

            let pre=document.querySelector('#msg pre');
            pre.textContent= '\n'+ JSON.stringify(schools,'\t',2);
        }

        document.addEventListener('DOMContentLoaded',() =>{
            document.getElementById('btn').addEventListener('click',addSchool);
        })
    </script>

</body>
</html>